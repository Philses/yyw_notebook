# 位运算的常见运用

### 异或的基本运用

* x ^ [1,1,……1] = ~x：可以将一个数的位级表示翻转。
* x ^ x = 0 : 可以用于消除重复偶数次出现的数。且注意 异或具有交换律的性质。
    * x ^ y ^ x = x ^ x ^ y = y
* 异或可以理解为二进制数的相加但是不进行进位操作。

### 与的基本运用

* 两数进行与运算并且左移一位，表示进位数。例如对于2 + 2 ：2 & 2 = 0010 + 0010 = 0010， 再左移一位得到0100 = 4，表示进位数。

* 利用 x &  [0,0,……0]  = 0 和 x &  [1,1,……1]  = x 的特点，可以实现掩码操作。一个数 num 与 mask：00111100 进行位与操作，只保留 num 中与 mask 的 1 部分相对应的位。

    * ```
        01011011 &
        00111100
        --------
        00011000
        ```

* x & (x - 1) 去除 x的位级表示中最低的一位1。例如对于 x=01101101，x-1=01101100。

    * ```
        01101101 &
        01101100
        --------
        01101100
        ```

* x & (-x) 得到 x 的位级表示中最低的那一位 1。-x即为x的反码+1，-x= ~x + 1。例如对于二进制表示 10110100，-n 得到 01001100，相与得到 00000100。

    * ```
        10110100 &
        01001100
        --------
        00000100
        ```

### 或的基本运用

* 利用 x | [0,0,……0]  = x 和 x |  [1,1,……1] =  [1,1,……1] 的特点，可以实现设值操作。一个数 num 与 mask：00111100 进行位或操作，将 num 中与 mask 的 1 部分相对应的位都设置为 1。

    * ```
        01011011 |
        00111100
        --------
        01111111
        ```

### mask计算

* 得到第`i`位为1，其余均为0的：`1<<(i-1)`。例如要得到第4位为1的mask 0000 1000，将1左移3位
* 得到第`i`位到第1位均为1，其余都是0的：`(1<<i) - 1`，例如要得到第3位到第一位1为1的mask 0000 0100，将1左移3位 0000 1000 再减一得到0000 0111
* 要得到 1 到 `i` 位为 0 的 mask，只需将 1 到` i` 位为 1 的 mask 取反，即` ~((1<<i)-1)`。

