# 11.9 信号，管道，消息队列和共享内存

### 信号（signal）

* 软件级别的中断：操作系统向某个进程发送signal信号，例如：SIGKILL SIGFPE SIGSTOP
* 进程接收信号会发生什么
    * 进程被挂掉
    * Ignore：进程将信号忽略
    * Catch：指定信号处理函数，接收到信息时调用相应处理函数，一般执行完处理函数后，原进程继续执行
* 缺点：不能传输要交换的任何数据
* 优点：这是异步操作，非常快
* 如何实现：
    * 首先应用程序如果要制定信号处理函数，那么应用程序开始时候要注册针对某类信息的handles，作为系统调用发送给OS，于是OS知道产生某类信号时，才会去调用相应信号处理函数
    * 一旦产生了信号，信号产生时，运行在内核态，从内核态返回用户态的时候，要返回信号处理函数的那条指令。通过修改应用程序的栈，让函数调用指针返回到信号处理函数的入口，并且将中断位置放到下一个栈指针的返回位置。

### 管道

* 由父进程为子进程创建
* 内核中的一块Buffer，管道兼具读端/写端，管道中的数据是字节流。
* 通过Buffer将进程/文件的输入输出通过重定向连接起来。进程不知道从键盘，文件，其他进程读取或写入到终端，文件，程序。
* 由shell来创建管道。

### 消息队列

* 有size的限制
* 按照FIFO来管理信息
* 不需要父进程创建
* 传递结构化的数据

### 共享内存

* 管道与消息队列都属于间接的进程通信，共享内存是直接的进程通信
* 进程间明确地设置了共享内存段，进程的虚拟地址映射到同一个物理地址
* 不需要经过系统调用，所以可以快速方便地共享数据
* 需要同步/互斥的操作保证正确性