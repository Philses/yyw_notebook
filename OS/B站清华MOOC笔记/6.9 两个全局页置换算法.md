# 6.9 两个全局页置换算法

### 工作集页面置换算法

* 将不在工作集时间区间$[t-△, t]$内的逻辑页面置换出去，并不是发生缺页异常才置换出去。
* 时间间隔（区间宽度）是一成不变的。
* 对于某个进程来说，可能缺页次数没有增加。但是在整个系统层面，可以给别的进程提供更多的物理页面，从而系统层面缺页次数降低。

### 缺页率页面置换算法

* 可变分配策略：常驻集大小可变。例如：每个进程刚开始运行的时候，先根据程序大小分配一定数目的物理页面，然后在进程运行过程中，动态地调整常驻集的大小。
    * 采取全局页面置换的方式：发生一个缺页中断时，被置换的页面可以是其它进程中的，各个并发进程竞争地使用物理页面。
    * 优缺点：性能较好，但增加了系统开销。
    * 具体实现：使用**缺页率算法**来动态调整常驻集的大小。
* 缺页率：缺页次数/总内存访问次数 或者 缺页的平均时间间隔的倒数。
    * 也就是说 缺页平均时间间隔越大，缺页率越低
    * 影响缺页率的因素：页面置换算法；分配给该进程的物理页面数目；页面本身的大小；程序本身的编写方法（局部性）。
* 缺页率算法
    * 缺页率高，通过增加工作集来分配更多的物理页面；缺页率低，通过减少工作集来减少它的物理页面数。力图使每个程序的缺页率保存在一个合理范围
    * 调整工作集的方式：调整工作集的$△$，也就是时间间隔。
    * 保持追综缺失发生概率
        * 上一次缺失发生的时间点为$t_l$，这一次发生缺失的时间点为$t_c$。设置阈值$T$。
        * 如果$t_c-t_l>T$，说明缺页率太低，从内存中移除所有$[t_l,t_c]$时间内没有引用的页。
        * 如果$t_c-t_l<=T$，说明缺页率太高，增加缺失的页到工作集中。

### 对比

* 工作集页面置换算法的工作集时间间隔长度不变；而缺页率置换算法的工作集大小动态变化。
* 工作集页面置换算法在每访问一个页都可能进行页面置换；而缺页率置换算法只有在发生缺页时才可能进行页面置换。